(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,a,t){e.exports=t(48)},23:function(e,a,t){},25:function(e,a,t){},46:function(e,a,t){},48:function(e,a,t){"use strict";t.r(a);var l=t(0),n=t.n(l),o=t(9),r=t.n(o),s=(t(23),t(4)),c=t(5),i=t(7),m=t(6),d=t(8),u=(t(25),t(1)),b=t.n(u),p=t(3),h=t.n(p),v=(t(46),"https://alohomora-virtual-library-cezar097.c9users.io:8081"),g=function(e){function a(){var e,t;Object(s.a)(this,a);for(var l=arguments.length,n=new Array(l),o=0;o<l;o++)n[o]=arguments[o];return(t=Object(i.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(n)))).postBook=function(){var e=t.props.title,a=t.props.author.toString(),l=t.props.userId;h.a.post(v+"/books",{title:e,author:a}).then(function(e){console.log("user "+l),console.log("book "+e.data.id),h.a.post(v+"/favorites/"+l+"/"+e.data.id).then(function(e){alert("Book added!")}).catch(function(e){alert(e)})}).catch(function(e){alert(e)})},t}return Object(d.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("div",{className:"col-md-2 book"},n.a.createElement("img",{className:"cover",src:this.props.image,alt:"Cover"}),n.a.createElement("h4",{className:"title"},this.props.title),n.a.createElement("h5",{className:"author"},this.props.author),n.a.createElement("button",{type:"button",className:"btn btn-primary","data-toggle":"modal","data-target":"#"+this.props.modalId},"Read more")),n.a.createElement("div",{className:"modal fade",id:this.props.modalId,tabIndex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"},n.a.createElement("div",{className:"modal-dialog"},n.a.createElement("div",{className:"modal-content"},n.a.createElement("div",{className:"modal-header"},n.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-hidden":"true"},"\xd7"),n.a.createElement("h4",{className:"modal-title",id:"myModalLabel"},this.props.title)),n.a.createElement("div",{className:"modal-body"},this.props.description),n.a.createElement("div",{className:"modal-footer"},n.a.createElement("div",{className:"left-side"},n.a.createElement("button",{type:"button",className:"btn btn-default btn-simple","data-dismiss":"modal"},"Close")),n.a.createElement("div",{className:"divider"}),n.a.createElement("div",{className:"right-side"},n.a.createElement("button",{type:"button",className:"btn btn-danger btn-simple",onClick:this.postBook,"data-dismiss":"modal"},"Add to favorites")))))))}}]),a}(l.Component),E=function(e){function a(){var e,t;Object(s.a)(this,a);for(var l=arguments.length,o=new Array(l),r=0;r<l;r++)o[r]=arguments[r];return(t=Object(i.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(o)))).getBooks=function(e){var a=[],l=0;return e.forEach(function(e){var o=null!=e.volumeInfo.imageLinks?e.volumeInfo.imageLinks.thumbnail:"https://read.macmillan.com/wp-content/uploads/2016/04/book-cover-placeholder.png",r=null!=e.volumeInfo.description?e.volumeInfo.description:"There's no description for this book.";a.push(n.a.createElement(g,{key:l++,modalId:l,userId:t.props.userId,image:o,title:e.volumeInfo.title,author:e.volumeInfo.authors,description:r}))}),a},t}return Object(d.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"container"},n.a.createElement("h2",null,"Results"),n.a.createElement("div",{className:"row"},this.getBooks(this.props.books)))}}]),a}(l.Component),f="https://alohomora-virtual-library-cezar097.c9users.io:8081",y=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(i.a)(this,Object(m.a)(a).call(this,e))).postUser=function(e){e.preventDefault();var a=b()("#email").val(),l=b()("#pass").val();return h.a.post(f+"/users",{email:a,pass:l}).then(function(e){alert("User created!"),t.setState({user:e.data[0]}),b()("#loginBtn").text("Welcome "+a),t.getFavs()}).catch(function(e){alert(e),console.log(e)}),!1},t.getUser=function(){var e=b()("#email").val(),a=b()("#pass").val();return h.a.get(f+"/users/"+e).then(function(l){e===l.data[0].email&&a===l.data[0].pass?(t.setState({user:l.data[0]}),b()("#loginBtn").text("Welcome "+e),t.getFavs()):alert("Email or password incorrect!")}).catch(function(e){alert(e),console.log(e)}),!1},t.getBooks=function(){var e=b()("#type").text().trim().toLowerCase(),a=b()("#searchBar").val().trim().toLowerCase();"title"===e?h.a.get(f+"/googlebooks/"+a).then(function(e){t.setState({books:e.data}),r.a.render(n.a.createElement(E,{userId:t.state.user.email,books:e.data.items}),document.getElementById("bksContainer"))}).catch(function(e){alert(e)}):"author"===e&&h.a.get(f+"/googleauthors/"+a).then(function(e){t.setState({books:e.data}),r.a.render(n.a.createElement(E,{userId:t.state.user.email,books:e.data.items}),document.getElementById("bksContainer"))}).catch(function(e){alert(e)})},t.modalType=function(){return null===t.state.user?"#loginmodal":"#favsmodal"},t.getFavs=function(){var e=b()("#favsBody");e.empty();var a=1;t.state.user.books.forEach(function(t){var l=b()("<tr></tr>"),n=b()("<td></td>").text(a++),o=b()("<td></td>").text(t.title),r=b()("<td></td>").text(t.author);l.append(n).append(o).append(r),e.append(l)})},t.state={user:null,books:null},t}return Object(d.a)(a,e),Object(c.a)(a,[{key:"componentDidMount",value:function(){b()(".dropdown-menu li a").click(function(){var e=b()(this).text();b()(this).parents(".btn-group").find(".dropdown-toggle").html(e+' <span class="caret"></span>')})}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("nav",{className:"navbar navbar-ct-transparent",id:"demo-navbar"},n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"navbar-header"},n.a.createElement("button",{type:"button",className:"navbar-toggle","data-toggle":"collapse","data-target":"#navigation-example-2"},n.a.createElement("span",{className:"sr-only"},"Toggle navigation"),n.a.createElement("span",{className:"icon-bar"}),n.a.createElement("span",{className:"icon-bar"}),n.a.createElement("span",{className:"icon-bar"})),n.a.createElement("div",{className:"logo-container"},n.a.createElement("div",{className:"logo"},n.a.createElement("img",{src:"assets/img/favicon.png",alt:"Alohomora Logo"})),n.a.createElement("div",{className:"brand"},"Alohomora Library"))),n.a.createElement("div",{className:"collapse navbar-collapse",id:"navigation-example-2"},n.a.createElement("ul",{className:"nav navbar-nav navbar-right"},n.a.createElement("li",null,n.a.createElement("button",{id:"loginBtn",type:"button",className:"btn btn-primary","data-toggle":"modal","data-target":this.modalType(),style:{backgroundColor:"#D22335",border:"none",color:"white"}},"Login")))))),n.a.createElement("div",{className:"wrapper"},n.a.createElement("div",{className:"demo-header demo-header-image"},n.a.createElement("div",{className:"motto"},n.a.createElement("h1",{className:"title-uppercase"},"Alohomora"),n.a.createElement("h3",null,"The magic of books at one click away")),n.a.createElement("div",{className:"container",style:{padding:"4em"}},n.a.createElement("div",{className:"row justify-content-center vcenter"},n.a.createElement("div",{className:"col-md-3"},n.a.createElement("div",{className:"btn-group",style:{float:"right"}},n.a.createElement("button",{id:"type",className:"btn dropdown-toggle","data-toggle":"dropdown",style:{color:"white",backgroundColor:"#D22335",border:"none"}},"Search book by ",n.a.createElement("span",{className:"caret"})),n.a.createElement("ul",{className:"dropdown-menu"},n.a.createElement("li",null,n.a.createElement("a",{href:"#"},"Title")),n.a.createElement("li",null,n.a.createElement("a",{href:"#"},"Author"))))),n.a.createElement("div",{className:"col-md-6"},n.a.createElement("input",{id:"searchBar",type:"text",placeholder:"Type here",className:"form-control"})),n.a.createElement("div",{className:"col-md-3"},n.a.createElement("button",{href:"https://www.google.com",className:"btn btn-danger btn-fill",style:{backgroundColor:"#D22335",border:"none"},onClick:this.getBooks},"Search")))))),n.a.createElement("div",{id:"bksContainer"}),n.a.createElement("div",{className:"modal fade",id:"loginmodal",tabIndex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"},n.a.createElement("div",{className:"modal-dialog"},n.a.createElement("div",{className:"modal-content",style:{backgroundColor:"#D22335"}},n.a.createElement("div",{className:"modal-body"},n.a.createElement("div",{className:"register-card"},n.a.createElement("form",{className:"register-form"},n.a.createElement("label",{style:{color:"white"}},"Email"),n.a.createElement("input",{type:"text",className:"form-control",placeholder:"Email",id:"email"}),n.a.createElement("label",{style:{color:"white"}},"Password"),n.a.createElement("input",{type:"password",className:"form-control",placeholder:"Password",id:"pass"}),n.a.createElement("button",{className:"btn btn-block",style:{marginTop:"1em",marginRight:"1em",float:"left",backgroundColor:"white",border:"none",width:"45%",display:"inline-block"},onClick:this.getUser,"data-dismiss":"modal"},"Log in"),n.a.createElement("button",{className:"btn btn-block",style:{marginTop:"1em",marginLeft:"1em",float:"right",backgroundColor:"white",border:"none",width:"45%",display:"inline-block"},onClick:this.postUser,"data-dismiss":"modal"},"Register"),n.a.createElement("button",{style:{visibility:"hidden"}}),n.a.createElement("button",{style:{visibility:"hidden"}}))))))),n.a.createElement("div",{className:"modal fade",id:"favsmodal",tabIndex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"},n.a.createElement("div",{className:"modal-dialog"},n.a.createElement("div",{className:"modal-content"},n.a.createElement("div",{className:"modal-header"},n.a.createElement("button",{type:"button",className:"close","aria-hidden":"true",onClick:this.getUser},"refresh"),n.a.createElement("h4",{className:"modal-title",id:"myModalLabel"},"Favorites")),n.a.createElement("div",{className:"modal-body"},n.a.createElement("table",{className:"table table-hover"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Id"),n.a.createElement("th",null,"Title"),n.a.createElement("th",null,"Author"))),n.a.createElement("tbody",{id:"favsBody"})))))))}}]),a}(l.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(n.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[17,2,1]]]);
//# sourceMappingURL=main.f65108e0.chunk.js.map